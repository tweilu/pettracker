<h1 class="page-header">My Pets</h1>

<div class="row">
  <div class="col-md-9">
    <div id="mypets-container">
      <%= form_tag pets_mypetsactions_path, :method => :post do %>
        <div class="controls form-inline">
          <%= text_field_tag 'sitter_email', nil, {:class => 'form-control', :placeholder => 'Sitter Email Address'}  %>
          <%= submit_tag 'Add Sitter', {:name => 'addsitter_btn', :class => 'btn btn-default'} %>
          &nbsp;&nbsp;
          <%= submit_tag 'Remove Sitter', {:name => 'removesitter_btn', :class => 'btn btn-default', confirm: "Are you sure you would like to remove sitters from these pets?"} %>
          <%= button_tag(type: 'submit', class: 'btn btn-default', name: 'delete_btn', :data => {confirm: "Are you sure you would like to delete these pets?"}) do %>
            <i class='icon-trash'></i>
          <% end %>
        </div>
        <% @pets.each do |pet| %>
          <div class="checkbox pull-left">
            <%= check_box_tag "pet_ids[]", pet.id %>
          </div>
          <%= link_to(pet) do %>
            <div class="my-pet-entry">
              <img class="pull-left my-pet-pic img-circle" src="http://placehold.it/100&text=my+pet" />
                <h2>
                  <%= pet.name %><br />
                  <small><%= pet.pet_type %> - 
                    <% if pet.sitter.nil? %>
                      No Sitter
                    <% else %>
                      Being sat by <%= pet.sitter.name %>
                    <% end %>
                  </small>
                </h2>
            </div>
          <% end%>
        <% end %>
      <% end %>
      <% if @pets.empty? %>
        <p>You have not added any of your pets.</p>
      <% end %>
    </div>
    <br />
    <a id="addpet-btn" class="btn btn-primary" href="#">+ Add Pet</a>
  </div>
</div>

<script type="text/javascript">
  $("#addpet-btn").click(function(e){
    e.preventDefault();
    $("#mypets-container").append("<%= escape_javascript(render 'addpet', :@pet => @newpet) %>");
    $("#addpet-btn").css({'display':'none'});
  })
</script>